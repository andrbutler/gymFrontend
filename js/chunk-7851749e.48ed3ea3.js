(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7851749e"],{"159b":function(e,a,t){var i=t("da84"),l=t("fdbc"),s=t("17c2"),n=t("9112");for(var r in l){var d=i[r],o=d&&d.prototype;if(o&&o.forEach!==s)try{n(o,"forEach",s)}catch(c){o.forEach=s}}},"17c2":function(e,a,t){"use strict";var i=t("b727").forEach,l=t("a640"),s=t("ae40"),n=l("forEach"),r=s("forEach");e.exports=n&&r?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"2b1c":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=this,t=a.$createElement,i=a._self._c||t;return i("div",{attrs:{id:"meals"}},[i("div",{staticClass:"box"},[a.$store.state.meals.loading?a._e():i("b-table",{attrs:{data:a.meals,selected:a.selectedMeal,columns:a.columns,focusable:"","sticky-header":""},on:{"update:selected":function(e){a.selectedMeal=e},click:function(a){e.updatedMeal={mealId:a.mealId,mealName:a.mealName,recipeLink:a.recipeLink,calories:a.calories,caloriesValid:!0,nameValid:!0,linkValid:!0,valid:!0},e.isNew=!1}}}),i("b-skeleton",{attrs:{size:"is-large",active:a.$store.state.meals.loading,count:2}})],1),i("div",{staticClass:"box",attrs:{id:"updatedMeal"}},[i("b-field",[i("b-switch",{attrs:{disabled:a.isNew,type:"is-dark"},on:{input:function(a){a&&(e.updatedMeal={mealId:null,mealName:null,recipeLink:null,calories:null,nameValid:!1,caloriesValid:!1,linkValid:!1,valid:!1})}},model:{value:a.isNew,callback:function(e){a.isNew=e},expression:"isNew"}},[a._v("New Meal")])],1),i("b-field",{attrs:{label:"Name"}},[i("b-input",{attrs:{placeholder:"name",maxlength:"120",required:""},nativeOn:{input:function(e){return a.validateName(e.target.validity.valid)}},model:{value:a.updatedMeal.mealName,callback:function(e){a.$set(a.updatedMeal,"mealName",e)},expression:"updatedMeal.mealName"}})],1),i("b-field",{attrs:{label:"Link"}},[i("b-input",{attrs:{placeholder:"link",maxlength:"100"},nativeOn:{input:function(e){return a.validateLink(e.target.validity.valid)}},model:{value:a.updatedMeal.recipeLink,callback:function(e){a.$set(a.updatedMeal,"recipeLink",e)},expression:"updatedMeal.recipeLink"}})],1),i("b-field",{attrs:{label:"calories"}},[i("b-input",{attrs:{placeholder:"calories",type:"number",max:"9999",min:"0"},nativeOn:{input:function(e){return a.validateCalories(e.target.validity.valid)}},model:{value:a.updatedMeal.calories,callback:function(e){a.$set(a.updatedMeal,"calories",e)},expression:"updatedMeal.calories"}})],1),i("b-button",{staticClass:"is-success",attrs:{disabled:!a.updatedMeal.valid},on:{click:function(e){return a.saveMeal()}}},[a._v("Save")])],1)])},l=[],s=t("5530"),n={data:function(){return{meals:this.$store.state.meals.data,selectedMeal:{},updatedMeal:{nameValid:!1,linkValid:!1,caloriesValid:!1,valid:!1},isNew:!0,columns:[{field:"mealName",label:"name",searchable:!0,sortable:!0},{field:"recipeLink",label:"link"},{field:"calories",label:"calories",sortable:!0,searchable:!0}]}},methods:{validateMeal:function(){this.updatedMeal.nameValid&&this.updatedMeal.linkValid&&this.updatedMeal.caloriesValid?this.updatedMeal.valid=!0:this.updatedMeal.valid=!1},validateName:function(e){this.updatedMeal.nameValid=e,this.validateMeal()},validateLink:function(e){this.updatedMeal.linkValid=e,this.validateMeal()},validateCalories:function(e){this.updatedMeal.caloriesValid=e,this.validateMeal()},saveMeal:function(){this.isNew?this.saveNewMeal():this.updateMeal()},saveNewMeal:function(){var e=this,a={mealName:this.updatedMeal.mealName,recipeLink:this.updatedMeal.recipeLink,calories:this.updatedMeal.calories};this.$store.dispatch("setLoading",{phase:"setLoading",type:"meals"}),this.axios.post("/meals/new",a,{headers:{Authorization:"Bearer "+this.$store.state.authToken}}).then((function(a){console.log(a),e.axios.get("/meals/all",{headers:{Authorization:"Bearer "+e.$store.state.authToken}}).then((function(a){e.$store.dispatch("fetchMeals",a.data),e.$store.dispatch("setLoading",{phase:"setLoaded",type:"meals"}),e.meals=e.$store.state.meals.data,e.updatedMeal={nameValid:!1,linkValid:!1,caloriesValid:!1,valid:!1},e.selectedMeal={},e.isNew=!0}),(function(a){e.$buefy.dialog.alert(a.response.data.message),e.$store.dispatch("setLoading",{phase:"setLoaded",type:"meals"})}))}),(function(a){e.$buefy.dialog.alert(a.response.data.message),e.$store.dispatch("setLoading",{phase:"setLoaded",type:"meals"})}))},updateMeal:function(){var e=this,a={mealName:this.updatedMeal.mealName,recipeLink:this.updatedMeal.recipeLink,calories:this.updatedMeal.calories},t=this.updatedMeal.mealId;this.$store.dispatch("setLoading",{phase:"setLoading",type:"meals"}),this.axios.post("/meals/update/"+t,a,{headers:{Authorization:"Bearer "+this.$store.state.authToken}}).then((function(i){console.log(i),e.$store.dispatch("updateMeals",Object(s["a"])({mealId:t},a)),e.$store.dispatch("setLoading",{phase:"setLoaded",type:"meals"}),e.exercises=e.$store.state.exercises.data,e.meals=e.$store.state.meals.data,e.updatedMeal={nameValid:!1,linkValid:!1,caloriesValid:!1,valid:!1},e.selectedMeal={},e.isNew=!0}),(function(a){e.$buefy.dialog.alert(a.response.data.message),e.$store.dispatch("setLoading",{phase:"setLoaded",type:"meals"})}))}}},r=n,d=t("2877"),o=Object(d["a"])(r,i,l,!1,null,null,null);a["default"]=o.exports},4160:function(e,a,t){"use strict";var i=t("23e7"),l=t("17c2");i({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"4de4":function(e,a,t){"use strict";var i=t("23e7"),l=t("b727").filter,s=t("1dde"),n=t("ae40"),r=s("filter"),d=n("filter");i({target:"Array",proto:!0,forced:!r||!d},{filter:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));t("a4d3"),t("4de4"),t("4160"),t("e439"),t("dbb4"),t("b64b"),t("159b");function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function l(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?l(Object(t),!0).forEach((function(a){i(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}},a640:function(e,a,t){"use strict";var i=t("d039");e.exports=function(e,a){var t=[][e];return!!t&&i((function(){t.call(null,a||function(){throw 1},1)}))}},b64b:function(e,a,t){var i=t("23e7"),l=t("7b0b"),s=t("df75"),n=t("d039"),r=n((function(){s(1)}));i({target:"Object",stat:!0,forced:r},{keys:function(e){return s(l(e))}})},dbb4:function(e,a,t){var i=t("23e7"),l=t("83ab"),s=t("56ef"),n=t("fc6a"),r=t("06cf"),d=t("8418");i({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(e){var a,t,i=n(e),l=r.f,o=s(i),c={},u=0;while(o.length>u)t=l(i,a=o[u++]),void 0!==t&&d(c,a,t);return c}})},e439:function(e,a,t){var i=t("23e7"),l=t("d039"),s=t("fc6a"),n=t("06cf").f,r=t("83ab"),d=l((function(){n(1)})),o=!r||d;i({target:"Object",stat:!0,forced:o,sham:!r},{getOwnPropertyDescriptor:function(e,a){return n(s(e),a)}})}}]);
//# sourceMappingURL=chunk-7851749e.48ed3ea3.js.map